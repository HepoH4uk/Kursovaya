# Приложение для анализа транзакций.

## Описание приложения
Приложение для анализа транзакций, которые находятся в Excel-файле. Приложение будет генерировать JSON-данные для веб-страниц, формировать Excel-отчеты, а также предоставлять другие сервисы.

### Описание модулей.
#### Main
    Функция которая собирает проект в единое целое:
1. Страница «Главная»
    - Приветствие
    - По каждой карте:
        последние 4 цифры карты;
        общая сумма расходов;
        кешбэк (1 рубль на каждые 100 рублей).
    - Топ-5 транзакций по сумме платежа.
    - Курс валют.
    - Стоимость акций из S&P500.
2. Сервисы
    - Простой поиск
3. Отчеты
    - Траты по категории

#### utils
```greetings```
Функция, которая приветствует пользователя в зависимости от текущего времени суток
Данный модуль вызывает все функциональности проекта, такие как:

```user_transactions```
Функция, которая извлекает детали транзакций для каждой карты:
    - последние 4 цифры карты
    - общие расходы
    - кэшбек (1 рубль за каждые 100 рублей расхода)

```max_five_transactions```
Функция, которая извлекает 5 лучших транзакций по сумме платежа.

```exchange_rate```
Функция, которая извлекает курсы обмена для USD и EUR к RUB путем вызова внешнего API.

```get_price_sp500```
Функция, которая извлекает цены акций из списка S&P 500 путем вызова внешнего API.

#### services
```simple_search```
Функция, которая получает строку для поиска и список транзакций.
Выводит список транзакций, в которых есть данная строка

#### reports
```save_report```
Декоратор для записи отчета в файл.

```spending_by_category```
Функция, которая принимает на вход: датафрейм с транзакциями, название категории,
опциональную дату. Если дата не передана, то берется текущая дата. Функция возвращает
траты по заданной категории за последние три месяца (от переданной даты).

#### views
```website```
Главная функция, принимающую на вход строку с датой и временем в формате
YYYY-MM-DD HH:MM:SS и возвращающую JSON-ответ со следующими данными:
Приветствие в формате "???", где ??? — «Доброе утро» / «Добрый день» / «Добрый вечер» / «Доброй ночи» в зависимости
от текущего времени.
По каждой карте:
    последние 4 цифры карты;
    общая сумма расходов;
    кешбэк (1 рубль на каждые 100 рублей).
    Топ-5 транзакций по сумме платежа.
    Курс валют.
    Стоимость акций из S&P500.

### Установка.
Клонируйте репозиторий:
```
git clone git@github.com:HepoH4uk/Kursovaya.git
```
Установите зависимости
```
poetry install
```
Также в проекте есть файлы конфигурации, в которых находятся переменные для записи в них путей к файлам и других параметров. В файле ```.env.example``` хранятся API-ключи. Необходимо создать файл .env из копии этого файла и заменить значения переменных на ваши.


### Тестирование

Для всех функция написаны тесты
```test_reports```
```test_services```
```test_utils```
```test_views```